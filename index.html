<html>
<head>
  <title>Old English Editor</title>
  <style>
    #inp {
      padding: 6px;
      font-size: 125%;
    }
  </style>
</head>

<body>
  <h2>Old English Editor</h2>
  <textarea id="inp" rows=20 cols=60 autofocus></textarea>

  <script type="text/javascript">
    var letters = {
      "D": "Ð",    "d": "ð",
      "T": "Þ",    "t": "þ",
      "W": "Ƿ",    "w": "ƿ",
      "A": "Æ",    "a": "æ",
    };

    var combining = {
      "-": {
        "A": "Ā",    "a": "ā",
        "E": "Ē",    "e": "ē",
        "I": "Ī",    "i": "ī",
        "O": "Ō",    "o": "ō",
        "U": "Ū",    "u": "ū",
        "Æ": "Ǣ",    "æ": "ǣ",
      },
      ".": {
        "G": "Ġ",    "g": "ġ",
        "C": "Ċ",    "c": "ċ",
      },
    }

    var inp = document.getElementById("inp");

    var putAtCursor = function(c, replace) {
      var pos = inp.selectionStart,
          end = inp.selectionEnd;

      if (replace) {
        if (pos != end) {
          return;
        }
        pos -= 1;
      }

      inp.value = inp.value.slice(0, pos) + c + inp.value.slice(end);
      inp.setSelectionRange(pos+1, pos+1);
    }

    inp.onkeydown = function(evt) {
        if (evt.altKey) {
          var k = evt.key;
          if (k in letters) {
            putAtCursor(letters[k], false);
            return false;
          }

          if (k in combining) {
            var prev = inp.value[inp.selectionStart - 1];
            if (prev in combining[k]) {
              putAtCursor(combining[k][prev], true);
              return false;
            }
          }
        }
    };
  </script>
</body>

</html>
